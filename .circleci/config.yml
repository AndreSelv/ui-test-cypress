#version: 2.1
#orbs:
#  cypress: cypress-io/cypress@2.2.0
#executors:
#  browsers-chrome100-ff99-edge:
#    description: Docker container with Node 16.14.2, Cypress dependencies, Chrome 100, Firefox 99, and the latest Edge
#    docker:
#      - image: cypress/browsers:node16.14.2-slim-chrome100-ff99-edge
#workflows:
#  build:
#    jobs:
#      - cypress/install
#      - cypress/run:
#          requires:
#            - cypress/install
#          name: Browse
#          executor: browsers-chrome100-ff99-edge
#          browser: chrome
#          record: true
#          parallel: true
#          parallelism: 8
#          debug: 'cypress:cli'
#          post-install:
#            - run: npx cypress info
#          store_artifacts: true
#          post-steps:
#            - store_artifacts:
#                path: mochawesome-report
#            - store_test_results:
#                path: cypress/results
#
#      - cypress/run:
#          requires:
#            - cypress/install
#          name: Firefox
#          executor: browsers-chrome100-ff99-edge
#          browser: firefox
#          record: true
#          parallel: true
#          parallelism: 6
#          debug: 'cypress:cli'
#          post-install:
#            - run: npx cypress info
#          store_artifacts: true
#          post-steps:
#            - store_artifacts:
#                path: mochawesome-report
#            - store_test_results:
#                path: cypress/results


#======================================================================================



version: 2.1
orbs:
  cypress: cypress-io/cypress@2.2.0
executors:
  browsers-chrome100-ff99-edge:
    description: Docker container with Node 16.14.2, Cypress dependencies, Chrome 100, Firefox 99, and the latest Edge
    docker:
      - image: cypress/browsers:node16.14.2-slim-chrome100-ff99-edge
workflows:
  build:
    jobs:
      - cypress/install
      - cypress/run:
#          command: CI=1 npx cypress run --config-file cypress.config-dev.js || npm run e2e-test-report
          requires:
            - cypress/install
          name: Browse
          executor: browsers-chrome100-ff99-edge
          browser: chrome
          record: true
          debug: 'cypress:cli'
          spec: cypress/e2e/browse/*
          config: cypress.config-dev.js
          post-install:
            - run: npx cypress info
          store_artifacts: true
          post-steps:
            - store_artifacts:
                path: mochawesome-report
            - store_test_results:
                path: cypress/results
